---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: prometheus

resources:
- ./prometheus.yaml
- ./service-monitor.yaml

secretGenerator:
- name: prometheus-main-extra-configs
  files:
  - ./alert-relabel.yaml
  options:
    disableNameSuffixHash: true

patches:
- path: ./env/patch-prometheus.yaml
- target:
    kind: ServiceMonitor
    name: prometheus
  path: ./env/patch-location-tag.yaml
